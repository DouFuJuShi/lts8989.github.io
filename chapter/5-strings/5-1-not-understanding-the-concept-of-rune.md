# 5 字符串

> **本章概要**
> * 理解 Go 中符文的基本概念
> * 防止字符串迭代和修剪的常见错误 
> * 避免因字符串连接或无用转换而导致的低效代码 
> * 使用子字符串避免内存泄漏

在 Go 中，字符串是一种不可变的数据结构，表示：

* 指向不可变字节切片的指针 
* 此数组中的总字节数

我们将在本章中看到 Go 有一种非常独特的方式来处理字符串，并引入了一个名为  runes 的概念。这个概念对于理解是必不可少的，并且可能会使新手感到困惑。一旦我们了解了字符串的管理方式，我们就可以在迭代字符串时避免常见错误。我们还将看到 Go 开发人员在使用或生成字符串时所犯的常见错误。此外，我们会看到有时我们可以直接使用 `[]byte` ，避免额外的分配。最后，我们将看到如何避免从子字符串中创建泄漏的常见错误。本章的主要目标是通过介绍常见的字符串错误来帮助您理解 Go 中字符串的工作原理。

## 5.1 不被理解的符文概念

如果不讨论 Go 中符文的概念，我们就无法开始本章关于字符串的内容。正如您将在本章的下一节中看到的，这个概念是彻底理解字符串处理方式和避免常见错误的关键。但首先，在深入研究 Go 符文之前，我们需要确保我们在一些基本编程方面保持一致概念。

我们应该明白 charset 和 encoding 的区别：

* 顾名思义，字符集是一组字符。例如，Unicode 字符集包含 2^21 个字符。
* 编码是二进制字符列表的翻译。例如，UTF‑8 是一种编码标准，能够将所有 Unicode 字符编码为可 变字节数：从 1 到 4 个字节。

我们提到了字符来简化字符集定义。然而，在 Unicode 中，我们使用码位的概念 来指代由单个值表示的项目。例如，字符由 U+6C49 代码点标识。使用 UTF‑8，使用三个 字节进行编码：0xE6、0xB1 和 0x89。